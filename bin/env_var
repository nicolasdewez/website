#!/bin/bash
set -e

declare -A DEFAULTS

# BDD
DEFAULTS["BDD_NICOLAS_DEWEZ_HOST"]="db"
DEFAULTS["BDD_NICOLAS_DEWEZ_PORT"]="3306"
DEFAULTS["BDD_NICOLAS_DEWEZ_NAME"]="nicolas-dewez"
DEFAULTS["BDD_NICOLAS_DEWEZ_USER"]="root"
DEFAULTS["BDD_NICOLAS_DEWEZ_PASSWORD"]="root"

# MAIL
DEFAULTS["MAILER_HOST"]="mailcatcher"
DEFAULTS["MAILER_PORT"]="1025"
DEFAULTS["MAILER_USER"]=""
DEFAULTS["MAILER_PASSWORD"]=""

# Checks if needed var already exists, and sets them with defaults if not
for key in "${!DEFAULTS[@]}"; do
    if [ -z "${!key}" ]; then
        declare -x "$key"="${DEFAULTS[$key]}"
    fi
done
